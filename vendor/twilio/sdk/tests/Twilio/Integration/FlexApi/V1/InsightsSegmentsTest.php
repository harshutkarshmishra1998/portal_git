<?php

/**
 * This code was generated by
 * \ / _    _  _|   _  _
 * | (_)\/(_)(_|\/| |(/_  v1.0.0
 * /       /
 */

namespace Twilio\Tests\Integration\FlexApi\V1;

use Twilio\Exceptions\DeserializeException;
use Twilio\Exceptions\TwilioException;
use Twilio\Http\Response;
use Twilio\Tests\HolodeckTestCase;
use Twilio\Tests\Request;

class InsightsSegmentsTest extends HolodeckTestCase {
    public function testFetchRequest(): void {
        $this->holodeck->mock(new Response(500, ''));

        $options = ['token' => "token", ];

        try {
            $this->twilio->flexApi->v1->insightsSegments("segment_id")->fetch($options);
        } catch (DeserializeException $e) {}
          catch (TwilioException $e) {}

        $headers = ['Token' => "token", ];

        $this->assertRequest(new Request(
            'get',
            'https://flex-api.twilio.com/v1/Insights/Segments/segment_id',
            [],
            [],
            $headers
        ));
    }

    public function testFetchResponse(): void {
        $this->holodeck->mock(new Response(
            200,
            '
            {
                "segment_id": "02dd8a65-c9e3-550b-9e98-5b11abb9b3a4",
                "external_id": "EV4ab3c50aeeb9dc48c96f7290cf626a37",
                "queue": "Everyone",
                "external_contact": "+13051515226",
                "external_segment_link_id": null,
                "date": "2022-02-08T08:00:00Z",
                "account_id": "76e4c1c3-6f93-5d08-ae66-aad4b9092f2d",
                "external_segment_link": null,
                "agent_id": "0e4a8059-18a3-5e48-9efb-29ae3213e7fe",
                "agent_phone": "+13051515226",
                "agent_name": "Flex Insights",
                "agent_team_name": "Everyone",
                "agent_team_name_in_hierarchy": "Everyone",
                "agent_link": null,
                "customer_phone": "+420606078007",
                "customer_name": "+420606078007",
                "customer_link": null,
                "segment_recording_offset": null,
                "media": null,
                "assessment_type": [
                    null
                ],
                "assessment_percentage": [
                    null
                ],
                "url": "https://flex-api.twilio.com/v1/Insights/Segments/02dd8a65-c9e3-550b-9e98-5b11abb9b3a4"
            }
            '
        ));

        $actual = $this->twilio->flexApi->v1->insightsSegments("segment_id")->fetch();

        $this->assertNotNull($actual);
    }

    public function testReadRequest(): void {
        $this->holodeck->mock(new Response(500, ''));

        $options = ['token' => "token", ];

        try {
            $this->twilio->flexApi->v1->insightsSegments->read($options);
        } catch (DeserializeException $e) {}
          catch (TwilioException $e) {}

        $headers = ['Token' => "token", ];

        $this->assertRequest(new Request(
            'get',
            'https://flex-api.twilio.com/v1/Insights/Segments',
            [],
            [],
            $headers
        ));
    }

    public function testReadEmptyResponse(): void {
        $this->holodeck->mock(new Response(
            200,
            '
            {
                "segments": [],
                "meta": {
                    "page": 0,
                    "page_size": 50,
                    "first_page_url": "https://flex-api.twilio.com/v1/Insights/Segments?ReservationId=WReeeff42d5326cfdaa0f7a1181d00f1b1&PageSize=50&Page=0",
                    "previous_page_url": null,
                    "url": "https://flex-api.twilio.com/v1/Insights/Segments?ReservationId=WReeeff42d5326cfdaa0f7a1181d00f1b1&PageSize=50&Page=0",
                    "next_page_url": null,
                    "key": "segments"
                }
            }
            '
        ));

        $actual = $this->twilio->flexApi->v1->insightsSegments->read();

        $this->assertNotNull($actual);
    }

    public function testReadFullResponse(): void {
        $this->holodeck->mock(new Response(
            200,
            '
            {
                "segments": [
                    {
                        "segment_id": "02dd8a65-c9e3-550b-9e98-5b11abb9b3a5",
                        "external_id": "EV4ab3c50aeeb9dc48c96f7290cf626a37",
                        "queue": "Everyone",
                        "external_contact": "+13051515226",
                        "external_segment_link_id": null,
                        "date": "2022-02-08T08:00:00Z",
                        "account_id": "76e4c1c3-6f93-5d08-ae66-aad4b9092f2d",
                        "external_segment_link": null,
                        "agent_id": "0e4a8059-18a3-5e48-9efb-29ae3213e7fe",
                        "agent_phone": "+13051515226",
                        "agent_name": "Flex Insights",
                        "agent_team_name": "Everyone",
                        "agent_team_name_in_hierarchy": "Everyone",
                        "agent_link": null,
                        "customer_phone": "+420606078007",
                        "customer_name": "+420606078007",
                        "customer_link": null,
                        "segment_recording_offset": null,
                        "media": null,
                        "assessment_type": [
                            null
                        ],
                        "assessment_percentage": [
                            null
                        ],
                        "url": "https://flex-api.twilio.com/v1/Insights/Segments/02dd8a65-c9e3-550b-9e98-5b11abb9b3a5"
                    }
                ],
                "meta": {
                    "page": 0,
                    "page_size": 50,
                    "first_page_url": "https://flex-api.twilio.com/v1/Insights/Segments?ReservationId=WReeeff42d5326cfdaa0f7a1181d00f1b1&PageSize=50&Page=0",
                    "previous_page_url": null,
                    "url": "https://flex-api.twilio.com/v1/Insights/Segments?ReservationId=WReeeff42d5326cfdaa0f7a1181d00f1b1&PageSize=50&Page=0",
                    "next_page_url": null,
                    "key": "segments"
                }
            }
            '
        ));

        $actual = $this->twilio->flexApi->v1->insightsSegments->read();

        $this->assertGreaterThan(0, \count($actual));
    }
}